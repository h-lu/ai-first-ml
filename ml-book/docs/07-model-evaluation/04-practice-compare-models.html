<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-Hans" xml:lang="zh-Hans"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7.4 Practice: 指挥AI生成并解读多维度评估报告 – 机器学习：AI驱动的学习与应用</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../07-model-evaluation/05-toolbox-experiment-tracking.html" rel="next">
<link href="../07-model-evaluation/03-what-confusion-matrix-f1.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "没有结果",
    "search-matching-documents-text": "匹配的文档",
    "search-copy-link-title": "复制搜索链接",
    "search-hide-matches-text": "隐藏其它匹配结果",
    "search-more-match-text": "更多匹配结果",
    "search-more-matches-text": "更多匹配结果",
    "search-clear-button-title": "清除",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "取消",
    "search-submit-button-title": "提交",
    "search-label": "搜索"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="展开或折叠侧边栏导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../04-project-kickoff/index.html">第一部分：传统机器学习 —— AIGC时代的新应用</a></li><li class="breadcrumb-item"><a href="../07-model-evaluation/04-practice-compare-models.html"><span class="chapter-title">7.4 Practice: 指挥AI生成并解读多维度评估报告</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="展开或折叠侧边栏导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="搜索" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">机器学习：AI驱动的学习与应用</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="搜索"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">欢迎踏上《机器学习：AI驱动的学习与应用》之旅</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">序章：新世界的生存法则</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="展开或折叠此栏">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01-welcome/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第1章 欢迎来到AI-First时代</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01-welcome/01-not-another-ml-book.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">1.1 这不是另一本机器学习教科书</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01-welcome/02-ai-conductor.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">1.2 告别代码搬运工，成为AI指挥家</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01-welcome/03-learning-philosophy.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">1.3 本书的学习哲学：AI协同与探索式学习</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01-welcome/04-what-you-will-get.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">1.4 你将获得的三个前沿项目与核心能力</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-guide/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第2章 本书使用指南与AI协同的艺术</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-guide/01-golden-circle.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2.1 “机器学习黄金圈”：我们的学习罗盘</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-guide/02-prompt-engineering.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2.2 如何向AI伙伴有效提问：Prompt Engineering入门</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-guide/03-first-ai-task.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2.3 你的第一个AI协同任务：让AI帮你解释一个概念</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02-guide/04-ai-learning-coach.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2.4 【AI协同工具箱】用AI做你的私人学习教练</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-environment/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第3章 搭建你的AI协同开发环境</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-environment/01-dev-environment.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">3.1 你的工具清单：Python, Jupyter与VS Code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-environment/02-ai-copilot-config.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">3.2 AI协同配置：让Copilot成为你的副驾驶</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03-environment/03-install-libraries.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">3.3 AI辅助安装核心库</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">第一部分：传统机器学习 —— AIGC时代的新应用</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="展开或折叠此栏">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-project-kickoff/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第4章 项目启动：AIGC产品质量危机</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-project-kickoff/01-why-crisis.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4.1 Why: AIGC的机遇与”胡说八道”的风险</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-project-kickoff/02-how-what-mission.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4.2 定义任务：将危机转化为可执行的AI指令</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-project-kickoff/03-practice-eda.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4.3 实践：指挥AI完成首次探索性数据分析(EDA)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04-project-kickoff/04-challenge-hypothesis.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4.4 挑战：从数据洞察到可验证的假设</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-text-to-vectors/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第5章 从文本到向量：教会机器”阅读”</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-text-to-vectors/01-why-machines-cant-read.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5.1 Why: 为什么机器无法直接理解文字？</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-text-to-vectors/02-how-exploration-tfidf.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5.2 How: 与AI的探索之旅——从词袋到TF-IDF</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-text-to-vectors/03-what-tfidf-concept.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5.3 What: 核心概念之TF-IDF</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05-text-to-vectors/04-practice-feature-engineering.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5.4 Practice: 指挥AI完成文本特征工程</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06-first-classifier/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第6章 你的第一个分类器：AI内容”安检门”</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06-first-classifier/01-why-first-inspector.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6.1 Why: 是时候让第一个”质检员”上岗了</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06-first-classifier/02-how-choose-model.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6.2 How: 与AI对话，选择合适的入门模型</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06-first-classifier/03-what-logistic-regression.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6.3 What: 核心概念之逻辑回归</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06-first-classifier/04-practice-train-predict-evaluate.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6.4 Practice: 指挥AI训练、预测与评估</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06-first-classifier/05-toolbox-ai-debug.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6.5 AI协同工具箱：首次接触AI辅助Debug</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07-model-evaluation/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第7章 “我的模型不够好？”——精通评估与迭代</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07-model-evaluation/01-why-metrics-matter.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7.1 Why: 当准确率”说谎”时</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07-model-evaluation/02-how-precision-recall.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7.2 How: 与AI对话，探寻更真实的评估尺度</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07-model-evaluation/03-what-confusion-matrix-f1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7.3 What: 核心概念之混淆矩阵、精确率、召回率与F1分数</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07-model-evaluation/04-practice-compare-models.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">7.4 Practice: 指挥AI生成并解读多维度评估报告</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07-model-evaluation/05-toolbox-experiment-tracking.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7.5 AI协同工具箱：系统化你的模型实验</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-explainable-ai/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第8章 打开黑箱：让AI解释它的决策</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-explainable-ai/01-why-explainability.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">8.1 Why: 我们为什么需要信任AI的决策？</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-explainable-ai/02-how-exploring-predictions.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">8.2 How: 与AI对话，探寻”决策”背后的蛛丝马迹</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-explainable-ai/03-what-xai-shap-lime.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">8.3 What: 核心概念之LIME与SHAP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-explainable-ai/04-practice-shap-plots.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">8.4 Practice: 指挥AI用SHAP绘制模型解释图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08-explainable-ai/05-challenge-refactoring.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">8.5 终极挑战：基于AI洞察重构你的项目</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">第二部分：深度学习 —— 构建企业级LLM应用</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="展开或折叠此栏">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-rag-kickoff/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第9章 项目启动：在海量文档中”海底捞针”</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-rag-kickoff/01-why-crisis.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">9.1 Why: 企业知识库的困境与LLM带来的曙光</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-rag-kickoff/02-how-rag-blueprint.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">9.2 How: 与AI一起绘制RAG系统蓝图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-rag-kickoff/03-what-rag-concept.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">9.3 What: 核心概念之检索增强生成 (RAG)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../09-rag-kickoff/04-toolbox-critical-thinking.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">9.4 【AI协同工具箱】用AI进行技术方案的批判性评估</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-embedding/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第10章 万物皆可向量化：Embedding的魔力</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-embedding/01-why-embedding.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10.1 Why: 超越TF-IDF，捕捉文本的深层语义</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-embedding/02-how-embedding-geometry.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10.2 How: 与AI探索Embedding的几何意义</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-embedding/03-what-word-sentence-embedding.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10.3 What: 核心概念之词向量与句向量</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../10-embedding/04-practice-embedding.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10.4 Practice: 指挥AI调用模型将文档转化为向量</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-vector-database/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第11章 构建你的记忆宫殿：向量数据库</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-vector-database/01-why-vector-db.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">11.1 Why: 为何需要专门的数据库来存储向量？</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-vector-database/02-how-ann.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">11.2 How: 与AI探讨高效向量检索的策略</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-vector-database/03-what-cosine-ann.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">11.3 What: 核心概念之相似度计算与近似最近邻(ANN)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../11-vector-database/04-practice-faiss.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">11.4 Practice: 指挥AI使用FAISS构建索引并查询</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../12-rag-pipeline/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第12章：串联成珠：搭建完整的RAG流程</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../12-rag-pipeline/1-why.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">12.1 Why: 将所有组件组装成一个可工作的系统</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../12-rag-pipeline/2-how.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">12.2 How: 与AI共同设计核心的Prompt模板</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../12-rag-pipeline/3-what.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">12.3 What: 核心概念之Prompt Engineering艺术</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../12-rag-pipeline/4-practice.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">12.4 Practice: 完整的RAG“指令剧本”</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../13-RAG-Optimization/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">第13章：优化你的机器人：从’幻觉’到’忠实’</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../13-RAG-Optimization/1-why.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">13.1 Why: “我的机器人有时还是会胡说八道”</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../13-RAG-Optimization/2-how.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">13.2 How: 与AI一起进行Bad Case分析与策略探讨</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../13-RAG-Optimization/3-what.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">13.3 What: 核心优化技术（分块、Top-K、重排）</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../13-RAG-Optimization/4-practice.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">13.4 Practice: 设计对比实验，优化问答效果</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../13-RAG-Optimization/5-challenge.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">13.5 Challenge: 如何处理知识库的更新与冲突？</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">目录</h2>
   
  <ul>
  <li><a href="#从单一指标到专业报告" id="toc-从单一指标到专业报告" class="nav-link active" data-scroll-target="#从单一指标到专业报告">从单一指标到专业报告</a>
  <ul class="collapse">
  <li><a href="#第一步生成专业评估报告" id="toc-第一步生成专业评估报告" class="nav-link" data-scroll-target="#第一步生成专业评估报告">第一步：生成专业评估报告</a></li>
  <li><a href="#第二步解读与分析" id="toc-第二步解读与分析" class="nav-link" data-scroll-target="#第二步解读与分析">第二步：解读与分析</a></li>
  </ul></li>
  <li><a href="#从解读到行动提出新的迭代假设" id="toc-从解读到行动提出新的迭代假设" class="nav-link" data-scroll-target="#从解读到行动提出新的迭代假设">从解读到行动：提出新的迭代假设</a></li>
  <li><a href="#本节小结" id="toc-本节小结" class="nav-link" data-scroll-target="#本节小结">本节小结</a>
  <ul class="collapse">
  <li><a href="#核心技能" id="toc-核心技能" class="nav-link" data-scroll-target="#核心技能">🎯 核心技能</a></li>
  <li><a href="#为何重要" id="toc-为何重要" class="nav-link" data-scroll-target="#为何重要">🤔 为何重要</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../04-project-kickoff/index.html">第一部分：传统机器学习 —— AIGC时代的新应用</a></li><li class="breadcrumb-item"><a href="../07-model-evaluation/04-practice-compare-models.html"><span class="chapter-title">7.4 Practice: 指挥AI生成并解读多维度评估报告</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-title">7.4 Practice: 指挥AI生成并解读多维度评估报告</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> 代码</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="从单一指标到专业报告" class="level2">
<h2 class="anchored" data-anchor-id="从单一指标到专业报告">从单一指标到专业报告</h2>
<p>现在，我们将把上一节学到的所有理论知识付诸实践。你将指挥AI，为我们上一章训练的逻辑回归模型生成一份专业、详细的”体检报告”，并学习如何从报告中解读出关键信息，从而指导我们下一步的优化方向。</p>
<p>我们的实践流程分为两步： 1. <strong>生成评估报告</strong>：指挥AI生成并可视化混淆矩阵，并打印出包含精确率、召回率和F1分数的分类报告。 2. <strong>解读与分析</strong>：学习如何解读这些报告，并基于解读结果提出新的模型迭代假设。</p>
<hr>
<section id="第一步生成专业评估报告" class="level3">
<h3 class="anchored" data-anchor-id="第一步生成专业评估报告">第一步：生成专业评估报告</h3>
<p>我们将使用<code>scikit-learn</code>中两个强大的工具：<code>confusion_matrix</code>和<code>classification_report</code>。</p>
<div class="callout callout-style-default callout-tip callout-titled" title="AI指令模板：生成并可视化评估报告">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
AI指令模板：生成并可视化评估报告
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong># 角色</strong> 你是一位精通<code>scikit-learn</code>和数据可视化（如<code>seaborn</code>）的Python数据科学家。</p>
<p><strong># 上下文</strong> 我已经有了一个训练好的分类模型<code>model</code>，以及测试集的真实标签<code>y_test</code>和预测标签<code>y_pred</code>。我还保留了用于解码标签的<code>label_encoder</code>，它知道数字（0,1,2）和真实类别（“有害”, “低质”, “优质”）的对应关系。</p>
<p><strong># 任务</strong> 请帮我编写一段Python代码，完成以下任务： 1. <strong>生成分类报告</strong>: * 从<code>sklearn.metrics</code>导入<code>classification_report</code>。 * 调用该函数，传入<code>y_test</code>和<code>y_pred</code>。 * 为了报告的可读性，请使用<code>target_names=label_encoder.classes_</code>来显示真实的类别名称，而不是0,1,2。 * 将生成的报告打印出来。</p>
<ol start="2" type="1">
<li><strong>生成并可视化混淆矩阵</strong>:
<ul>
<li>从<code>sklearn.metrics</code>导入<code>confusion_matrix</code>。</li>
<li>调用该函数，生成混淆矩阵。</li>
<li>使用<code>seaborn.heatmap()</code>来创建一个美观的热力图，以可视化混淆矩阵。</li>
<li>在热力图上，请：
<ul>
<li>使用<code>annot=True</code>和<code>fmt='d'</code>来在每个格子里显示具体的数字。</li>
<li>使用<code>cmap='Blues'</code>颜色主题。</li>
<li>设置x轴和y轴的标签，使用<code>label_encoder.classes_</code>来显示类别名称，并分别命名为”Predicted Label”和”True Label”。</li>
<li>添加一个清晰的标题，例如”Confusion Matrix for AIGC Content Classification”。</li>
</ul></li>
</ul></li>
</ol>
<p><strong># 输出格式</strong> 请提供可以直接运行的、结构清晰的Python代码，并为关键步骤添加注释。</p>
</div>
</div>
<hr>
</section>
<section id="第二步解读与分析" class="level3">
<h3 class="anchored" data-anchor-id="第二步解读与分析">第二步：解读与分析</h3>
<p>在运行AI生成的代码后，你将得到两份关键的输出：一份文本报告和一张热力图。</p>
<section id="示例输出-1-分类报告-classification-report" class="level4">
<h4 class="anchored" data-anchor-id="示例输出-1-分类报告-classification-report">示例输出 1: 分类报告 (Classification Report)</h4>
<pre><code>                     precision    recall  f1-score   support

           有害       0.75      0.60      0.67        10
           低质       0.85      0.88      0.86       140
           优质       0.98      0.99      0.98       850

      accuracy                           0.95      1000
     macro avg       0.86      0.82      0.84      1000
  weighted avg       0.95      0.95      0.95      1000</code></pre>
<p><strong>如何解读这份报告？</strong> - <strong>逐行看 (按类别)</strong>: - <strong>有害 (Harmful)</strong>: - <code>precision</code>=0.75: 在所有被模型标记为”有害”的内容中，75%是真有害，25%是误杀。 - <code>recall</code>=0.60: 在所有真正的”有害”内容中，模型只成功找出了60%，有40%的”漏网之鱼”！<strong>这是一个巨大的警报！</strong> - <code>f1-score</code>=0.67: 综合分数不高，主要是被低召回率拖累了。 - <strong>低质 (Low Quality)</strong>: 各项指标在85%左右，表现尚可。 - <strong>优质 (High Quality)</strong>: 各项指标都接近99%，表现非常好。这不奇怪，因为它的样本量最大。 - <strong>看平均值 (宏观)</strong>: - <code>accuracy</code>=0.95: 这就是我们之前看到的、具有欺骗性的总体准确率。 - <code>macro avg</code> (宏平均): - 它的F1分数是0.84，比加权平均的0.95低很多。这是因为<strong>宏平均平等地看待每个类别</strong>，“有害”类别的糟糕表现严重拉低了平均分。<strong>在类别不平衡时，我们应该更关注宏平均！</strong> - <code>weighted avg</code> (加权平均): - 它的F1分数是0.95，和准确率很接近。因为它按样本量加权，“优质”类别的高分主导了结果。</p>
</section>
<section id="示例输出-2-混淆矩阵热力图" class="level4">
<h4 class="anchored" data-anchor-id="示例输出-2-混淆矩阵热力图">示例输出 2: 混淆矩阵热力图</h4>
<p><img src="https://i.imgur.com/example.png" class="img-fluid" alt="Confusion Matrix Heatmap"> (这是一个示意图，真实的热力图会由代码生成)</p>
<pre><code>          Predicted: 有害  Predicted: 低质  Predicted: 优质
Actual: 有害         6             3             1
Actual: 低质         4            123           13
Actual: 优质         1             8            841</code></pre>
<p><strong>如何解读这张图？</strong> - <strong>看对角线 (TP)</strong>: <code>(6, 123, 841)</code> 是模型预测正确的数量。我们希望这些数字越大越好。 - <strong>看非对角线 (Errors)</strong>: 这些是模型犯错的地方。 - <strong>第一行 (Actual: 有害)</strong>: - 总共有 <code>6+3+1=10</code> 个真实有害样本。 - 模型正确识别了6个 (TP)。 - <strong>模型将3个有害内容错判为”低质” (FN)</strong>。 - <strong>模型将1个有害内容错判为”优质” (FN)</strong>。 这两种是<strong>最严重的漏报错误</strong>！ - <strong>第一列 (Predicted: 有害)</strong>: - 总共有 <code>6+4+1=11</code> 个内容被预测为有害。 - 其中6个是真有害 (TP)。 - <strong>模型将4个低质内容错判为”有害” (FP)</strong>。 - <strong>模型将1个优质内容错判为”有害” (FP)</strong>。 这两种是<strong>误杀错误</strong>。</p>
</section>
</section>
</section>
<section id="从解读到行动提出新的迭代假设" class="level2">
<h2 class="anchored" data-anchor-id="从解读到行动提出新的迭代假设">从解读到行动：提出新的迭代假设</h2>
<p>通过这份详细的体检报告，我们从一个模糊的”95%准确率”得到了深刻的洞察。现在，我们可以基于这些洞察，提出清晰的、数据驱动的优化方向。</p>
<p><strong>核心问题</strong>: 如何提升”有害”内容这个关键类别上的<strong>召回率</strong>？</p>
<p><strong>可能的迭代假设</strong>: 1. <strong>数据层面</strong>: “有害”内容的样本太少了，模型没有学好。我们是不是应该去收集更多的”有害”内容样本？(数据增强) 2. <strong>算法层面</strong>: 逻辑回归是一个简单的线性模型，可能无法捕捉”有害”内容复杂的语义模式。我们是不是应该尝试一个更强大的模型，比如<strong>梯度提升机(LightGBM)</strong>或者<strong>深度学习模型</strong>？ 3. <strong>阈值层面</strong>: 默认的0.5决策阈值可能不适合我们的业务。我们是不是可以<strong>降低”有害”类别的决策阈值</strong>，让模型变得更”敏感”，从而提高召回率（即使会牺牲一些精确率）？</p>
<p>这些假设为我们接下来的模型迭代指明了方向。</p>
</section>
<section id="本节小结" class="level2">
<h2 class="anchored" data-anchor-id="本节小结">本节小结</h2>
<section id="核心技能" class="level3">
<h3 class="anchored" data-anchor-id="核心技能">🎯 核心技能</h3>
<ol type="1">
<li><strong>生成报告</strong>: 你学会了指挥AI使用<code>classification_report</code>和<code>confusion_matrix</code>来生成专业的模型评估报告。</li>
<li><strong>解读报告</strong>: 你掌握了如何从分类报告和混淆矩阵中，分析模型在每个类别上的具体表现，以及它主要犯了哪些类型的错误（漏报 vs.&nbsp;误杀）。</li>
<li><strong>提出假设</strong>: 你学会了如何基于评估结果，提出数据驱动的、可执行的下一步优化策略。</li>
</ol>
</section>
<section id="为何重要" class="level3">
<h3 class="anchored" data-anchor-id="为何重要">🤔 为何重要</h3>
<p>能够生成并专业地解读模型评估报告，是区分机器学习初学者和专业人士的关键分水岭。它标志着你从一个”模型使用者”转变为一个能够诊断、分析并持续优化模型的”模型医生”。</p>
<p>在下一节，我们将学习如何系统地管理这些模型迭代过程，确保我们的每一次尝试都有记录、可追溯、可比较。</p>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "已复制");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "已复制");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../07-model-evaluation/03-what-confusion-matrix-f1.html" class="pagination-link" aria-label="7.3 What: 核心概念之混淆矩阵、精确率、召回率与F1分数">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">7.3 What: 核心概念之混淆矩阵、精确率、召回率与F1分数</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../07-model-evaluation/05-toolbox-experiment-tracking.html" class="pagination-link" aria-label="7.5 AI协同工具箱：系统化你的模型实验">
        <span class="nav-page-text"><span class="chapter-title">7.5 AI协同工具箱：系统化你的模型实验</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">源代码</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb3" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># 7.4 Practice: 指挥AI生成并解读多维度评估报告</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## 从单一指标到专业报告</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>现在，我们将把上一节学到的所有理论知识付诸实践。你将指挥AI，为我们上一章训练的逻辑回归模型生成一份专业、详细的"体检报告"，并学习如何从报告中解读出关键信息，从而指导我们下一步的优化方向。</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>我们的实践流程分为两步：</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**生成评估报告**：指挥AI生成并可视化混淆矩阵，并打印出包含精确率、召回率和F1分数的分类报告。</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**解读与分析**：学习如何解读这些报告，并基于解读结果提出新的模型迭代假设。</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">### 第一步：生成专业评估报告</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>我们将使用<span class="in">`scikit-learn`</span>中两个强大的工具：<span class="in">`confusion_matrix`</span>和<span class="in">`classification_report`</span>。</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>:::{.callout-tip title="AI指令模板：生成并可视化评估报告" icon="fas fa-robot"}</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>**# 角色**</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>你是一位精通<span class="in">`scikit-learn`</span>和数据可视化（如<span class="in">`seaborn`</span>）的Python数据科学家。</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>**# 上下文**</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>我已经有了一个训练好的分类模型<span class="in">`model`</span>，以及测试集的真实标签<span class="in">`y_test`</span>和预测标签<span class="in">`y_pred`</span>。我还保留了用于解码标签的<span class="in">`label_encoder`</span>，它知道数字（0,1,2）和真实类别（"有害", "低质", "优质"）的对应关系。</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>**# 任务**</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>请帮我编写一段Python代码，完成以下任务：</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**生成分类报告**:</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="ss">    *   </span>从<span class="in">`sklearn.metrics`</span>导入<span class="in">`classification_report`</span>。</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="ss">    *   </span>调用该函数，传入<span class="in">`y_test`</span>和<span class="in">`y_pred`</span>。</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="ss">    *   </span>为了报告的可读性，请使用<span class="in">`target_names=label_encoder.classes_`</span>来显示真实的类别名称，而不是0,1,2。</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="ss">    *   </span>将生成的报告打印出来。</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**生成并可视化混淆矩阵**:</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="ss">    *   </span>从<span class="in">`sklearn.metrics`</span>导入<span class="in">`confusion_matrix`</span>。</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="ss">    *   </span>调用该函数，生成混淆矩阵。</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="ss">    *   </span>使用<span class="in">`seaborn.heatmap()`</span>来创建一个美观的热力图，以可视化混淆矩阵。</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="ss">    *   </span>在热力图上，请：</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="ss">        *   </span>使用<span class="in">`annot=True`</span>和<span class="in">`fmt='d'`</span>来在每个格子里显示具体的数字。</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="ss">        *   </span>使用<span class="in">`cmap='Blues'`</span>颜色主题。</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="ss">        *   </span>设置x轴和y轴的标签，使用<span class="in">`label_encoder.classes_`</span>来显示类别名称，并分别命名为"Predicted Label"和"True Label"。</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="ss">        *   </span>添加一个清晰的标题，例如"Confusion Matrix for AIGC Content Classification"。</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>**# 输出格式**</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>请提供可以直接运行的、结构清晰的Python代码，并为关键步骤添加注释。</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a><span class="fu">### 第二步：解读与分析</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>在运行AI生成的代码后，你将得到两份关键的输出：一份文本报告和一张热力图。</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 示例输出 1: 分类报告 (Classification Report)</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a><span class="in">                     precision    recall  f1-score   support</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a><span class="in">           有害       0.75      0.60      0.67        10</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span class="in">           低质       0.85      0.88      0.86       140</span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="in">           优质       0.98      0.99      0.98       850</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a><span class="in">      accuracy                           0.95      1000</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="in">     macro avg       0.86      0.82      0.84      1000</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a><span class="in">  weighted avg       0.95      0.95      0.95      1000</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>**如何解读这份报告？**</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**逐行看 (按类别)**:</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**有害 (Harmful)**:</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`precision`</span>=0.75: 在所有被模型标记为"有害"的内容中，75%是真有害，25%是误杀。</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`recall`</span>=0.60: 在所有真正的"有害"内容中，模型只成功找出了60%，有40%的"漏网之鱼"！**这是一个巨大的警报！**</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`f1-score`</span>=0.67: 综合分数不高，主要是被低召回率拖累了。</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**低质 (Low Quality)**: 各项指标在85%左右，表现尚可。</span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**优质 (High Quality)**: 各项指标都接近99%，表现非常好。这不奇怪，因为它的样本量最大。</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**看平均值 (宏观)**:</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`accuracy`</span>=0.95: 这就是我们之前看到的、具有欺骗性的总体准确率。</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`macro avg`</span> (宏平均):</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>它的F1分数是0.84，比加权平均的0.95低很多。这是因为**宏平均平等地看待每个类别**，"有害"类别的糟糕表现严重拉低了平均分。**在类别不平衡时，我们应该更关注宏平均！**</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`weighted avg`</span> (加权平均):</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>它的F1分数是0.95，和准确率很接近。因为它按样本量加权，"优质"类别的高分主导了结果。</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 示例输出 2: 混淆矩阵热力图</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a><span class="al">![Confusion Matrix Heatmap](https://i.imgur.com/example.png)</span>  (这是一个示意图，真实的热力图会由代码生成)</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a><span class="in">          Predicted: 有害  Predicted: 低质  Predicted: 优质</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a><span class="in">Actual: 有害         6             3             1</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a><span class="in">Actual: 低质         4            123           13</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a><span class="in">Actual: 优质         1             8            841</span></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>**如何解读这张图？**</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**看对角线 (TP)**: <span class="in">`(6, 123, 841)`</span> 是模型预测正确的数量。我们希望这些数字越大越好。</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**看非对角线 (Errors)**: 这些是模型犯错的地方。</span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**第一行 (Actual: 有害)**:</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>总共有 <span class="in">`6+3+1=10`</span> 个真实有害样本。</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>模型正确识别了6个 (TP)。</span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>**模型将3个有害内容错判为"低质" (FN)**。</span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>**模型将1个有害内容错判为"优质" (FN)**。 这两种是**最严重的漏报错误**！</span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**第一列 (Predicted: 有害)**:</span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>总共有 <span class="in">`6+4+1=11`</span> 个内容被预测为有害。</span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>其中6个是真有害 (TP)。</span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>**模型将4个低质内容错判为"有害" (FP)**。</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>**模型将1个优质内容错判为"有害" (FP)**。 这两种是**误杀错误**。</span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a><span class="fu">## 从解读到行动：提出新的迭代假设</span></span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>通过这份详细的体检报告，我们从一个模糊的"95%准确率"得到了深刻的洞察。现在，我们可以基于这些洞察，提出清晰的、数据驱动的优化方向。</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>**核心问题**: 如何提升"有害"内容这个关键类别上的**召回率**？</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>**可能的迭代假设**:</span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**数据层面**: "有害"内容的样本太少了，模型没有学好。我们是不是应该去收集更多的"有害"内容样本？(数据增强)</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**算法层面**: 逻辑回归是一个简单的线性模型，可能无法捕捉"有害"内容复杂的语义模式。我们是不是应该尝试一个更强大的模型，比如**梯度提升机(LightGBM)**或者**深度学习模型**？</span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**阈值层面**: 默认的0.5决策阈值可能不适合我们的业务。我们是不是可以**降低"有害"类别的决策阈值**，让模型变得更"敏感"，从而提高召回率（即使会牺牲一些精确率）？</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>这些假设为我们接下来的模型迭代指明了方向。</span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a><span class="fu">## 本节小结</span></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a><span class="fu">### 🎯 核心技能</span></span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**生成报告**: 你学会了指挥AI使用<span class="in">`classification_report`</span>和<span class="in">`confusion_matrix`</span>来生成专业的模型评估报告。</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**解读报告**: 你掌握了如何从分类报告和混淆矩阵中，分析模型在每个类别上的具体表现，以及它主要犯了哪些类型的错误（漏报 vs. 误杀）。</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**提出假设**: 你学会了如何基于评估结果，提出数据驱动的、可执行的下一步优化策略。</span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a><span class="fu">### 🤔 为何重要</span></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>能够生成并专业地解读模型评估报告，是区分机器学习初学者和专业人士的关键分水岭。它标志着你从一个"模型使用者"转变为一个能够诊断、分析并持续优化模型的"模型医生"。</span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a>在下一节，我们将学习如何系统地管理这些模型迭代过程，确保我们的每一次尝试都有记录、可追溯、可比较。 </span></code><button title="复制到剪贴板" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>机器学习：AI驱动的学习与应用</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>本书使用 Quarto 构建</p>
</div>
  </div>
</footer>




</body></html>